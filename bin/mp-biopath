#!/usr/bin/env julia

using DocOpt
import YAML

doc = """MP-BioPath.

Usage:
  mp-biopath inference --config=<file> [-verbose]
  mp-biopath -h | --help
  mp-biopath --version

Options:
  --config <file>  Configuration file to use for run 
  -h --help        Show this screen.
  -v -verbose      Verbose output
  --version        Show version.
"""

include("../src/inference.jl")

arguments = docopt(doc, version=v"1.0.0")

configFile = arguments["--config"]

verbose = arguments["-v"]

if (verbose)
   dump(configFile)
end

if (!isfile(configFile))
   error("config file not found")
end

if (verbose)
   info("parsing config file: $configFile")
end

config = YAML.load(open(configFile))

if (verbose)
  dump(config)
end

function main()
    Inference.run(config, verbose)
end

main()

